<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>É isso aí, negada</title>
  <link rel="stylesheet" type="text/css" href="assets/leaflet-0.7.3/leaflet.css">
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/regras_basicas.css">
</head>
<body>

<div class="header">Cabeçalho central</div>

<div id="content" class="body">
  <div id="menu" class="pure-menu ">
  <span class="pure-menu-heading">Biciguia</span>
  <form class="pure-form pure-form-stacked">
    <ul class="pure-menu-list">
      <input type="text" class="address pure-input" id="origin_address" placeholder="Origem">
      <input type="text" class="address pure-input" id="destination_address" placeholder="Destino">
      <button type="button" id="route_button" class="pure-button">Buscar rota</button>
    </ul>
    <div id="suggestions" style="z-index: 1; position: absolute; background: black">
      <span class="pure-menu-heading" id="origin_heading" style="display: none">Endereços de Origem</span>
      <ul class="pure-menu-list" id="origin_table" style="display: none">
      </ul>
      <span class="pure-menu-heading" id="destination_heading" style="display: none">Endereços de Destino</span>
      <ul class="pure-menu-list" id="destination_table" style="display: none">
      </ul>
    </div>
  </form>
  </div>


  <div id="map">
  </div>
</div>


<script type="text/javascript" src="assets/leaflet-0.7.3/leaflet.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-1.11.2.min.js"></script>

<script type="text/javascript" src="assets/js/event_handlers.js"></script>

<script>
function getGeocodeFromAddress(element, source) {
  var value = $(element).val();
  if(!value){ /* hideAddressList(source); */ return; }
  var geoCoderURL = "//nominatim.openstreetmap.org/search?format=json";
  geoCoderURL += "&city=" + encodeURIComponent("São Paulo");
  geoCoderURL += "&state=" + encodeURIComponent("São Paulo");
  geoCoderURL += "&country=Brasil";
  geoCoderURL += "&street=" + encodeURIComponent($(element).val());
  $.get(geoCoderURL, function(data){
    showAddressList(data, source);
  }).fail(function(){
    console.log("ERRO");
  });
}

// create a map in the "map" div, set the view to a given place and zoom
var map = L.map('map').setView([-23.5475, -46.63611], 13);

// add an OpenStreetMap tile layer
L.tileLayer('http://otile1.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// add a marker in the given location, attach some popup content to it and open the popup
L.marker([-23.5475, -46.63611]).addTo(map)
    .bindPopup('A pretty CSS3 popup. <br> Easily customizable.')
    .openPopup();
</script>
</body>
</html>
